<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>

 lua_pcall
</title>
<link href="doctorch.css" rel="stylesheet" type="text/css">
</head>

<body class="torchdoc">
<div id="container">

<div id="header">
<h3>
 lua_pcall</h3>
</div>

<div id="navline">
<a href="index.html">Torch Manual</a>&nbsp; > &nbsp; <a href="LuaManual.html">
Lua 5.1 Reference Manual</a>&nbsp; > &nbsp; <a href="LuaManual-3.html">
  The Application Program Interface</a>&nbsp; > &nbsp; <a href="LuaManual-3-7.html">
  Functions and Types</a>&nbsp; > &nbsp; <b>
 <code>lua_pcall</code></b>
</div>

<div id="contents">
<a name="LUAERRMEM:*"></a>

<p>

<p>

<pre>
lua_pcall (lua_State *L, int nargs, int nresults, int errfunc);
</pre>
<p>

<p>

 Calls a function in protected mode.   
<p>

 Both <code>nargs</code> and <code>nresults</code> have the same meaning as in <a href="#luacall"><code>lua_call</code></a>. If there are no errors during the call, <a href="#luapcall"><code>lua_pcall</code></a> behaves exactly like <a href="#luacall"><code>lua_call</code></a>. However, if there is any error, <a href="#luapcall"><code>lua_pcall</code></a> catches it, pushes a single value on the stack (the error message), and returns an error code. Like <a href="#luacall"><code>lua_call</code></a>, <a href="#luapcall"><code>lua_pcall</code></a> always removes the function and its arguments from the stack.   
<p>

 If <code>errfunc</code> is 0, then the error message returned on the stack is exactly the original error message. Otherwise, <code>errfunc</code> is the stack index of an <i>error handler function</i>. (In the current implementation, this index cannot be a pseudo-index.) In case of runtime errors, this function will be called with the error message and its return value will be the message returned on the stack by <a href="#luapcall"><code>lua_pcall</code></a>.   
<p>

 Typically, the error handler function is used to add more debug information to the error message, such as a stack traceback. Such information cannot be gathered after the return of <a href="#luapcall"><code>lua_pcall</code></a>, since by then the stack has unwound.   
<p>

 The <a href="#luapcall"><code>lua_pcall</code></a> function returns 0 in case of success or one of the following error codes (defined in <code>lua.h</code>):    
<ul><li>*=LUA_ERRRUN= a runtime error.  
</li><li>*=LUA_ERRMEM= memory allocation error. For such errors, Lua does not call the error handler function.  
</li><li>*=LUA_ERRERR= error while running the error handler function.       
</li></ul><hr>
<p>

</div>



<div id="footer-left">&nbsp;<a href="LuaManual-3-7-41.html">
 <code>lua_objlen</code></a></div>
<div id="footer-right"><a href="LuaManual-3-7-43.html">
 <code>lua_pop</code></a>&nbsp;</div>

<div id="last-modified">

</div>

</div>
</body>
</html>

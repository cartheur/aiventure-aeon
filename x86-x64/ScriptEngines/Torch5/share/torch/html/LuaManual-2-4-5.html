<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>

  For Statement
</title>
<link href="doctorch.css" rel="stylesheet" type="text/css">
</head>

<body class="torchdoc">
<div id="container">

<div id="header">
<h3>
  For Statement</h3>
</div>

<div id="navline">
<a href="index.html">Torch Manual</a>&nbsp; > &nbsp; <a href="LuaManual.html">
Lua 5.1 Reference Manual</a>&nbsp; > &nbsp; <a href="LuaManual-2.html">
  The Language</a>&nbsp; > &nbsp; <a href="LuaManual-2-4.html">
  Statements</a>&nbsp; > &nbsp; <b>
  For Statement</b>
</div>

<div id="contents">
<a name="ForStatement"></a>

<p>

<p>

<p>

  The <b>for</b> statement has two forms: one numeric and one generic.   
<p>

 The numeric <b>for</b> loop repeats a block of code while a control variable runs through an arithmetic progression. It has the following syntax:
<pre>
	stat ::= *for* Name `*=*` exp `*,*` exp [`*,*` exp] *do* block *end*
</pre>
<p>

<p>

 The <i>block</i> is repeated for <i>name</i> starting at the value of the first <i>exp</i>, until it passes the second <i>exp</i> by steps of the third <i>exp</i>. More precisely, a <b>for</b> statement like
<pre>
     for v = _e1_, _e2_, _e3_ do _block_ end
</pre>
<p>

<p>

 is equivalent to the code:
<pre>
     do
       local _var_, _limit_, _step_ = tonumber(_e1_), tonumber(_e2_), tonumber(_e3_)
       if not (_var_ and _limit_ and _step_) then error() end
       while (_step_ > 0 and _var_ <= _limit_) or (_step_ <= 0 and _var_ >= _limit_) do
         local v = _var_
         _block_
         _var_ = _var_ + _step_
       end
     end
</pre>
<p>

<p>

 Note the following:    
<ul><li>All three control expressions are evaluated only once, before the loop starts. They must all result in numbers.  
</li><li><code>_var_</code>, <code>_limit_</code>, and <code>_step_</code> are invisible variables. The names are here for explanatory purposes only.  
</li><li>If the third expression (the step) is absent, then a step of 1 is used.  
</li><li>You can use <b>break</b> to exit a <b>for</b> loop.  
</li><li>The loop variable <code>v</code> is local to the loop; you cannot use its value after the <b>for</b> ends or is broken. If you need this value, assign it to another variable before breaking or exiting the loop.    
</li></ul><p>

 The generic <b>for</b> statement works over functions, called <i>iterators</i>. On each iteration, the iterator function is called to produce a new value, stopping when this new value is <b>nil</b>. The generic <b>for</b> loop has the following syntax:
<pre>
	stat ::= *for* namelist *in* explist1 *do* block *end*
	namelist ::= Name {`*,*` Name}
</pre>
<p>

<p>

 A <b>for</b> statement like
<pre>
     for _var_1_, ..., _var_n_ in _explist_ do _block_ end
</pre>
<p>

<p>

 is equivalent to the code:
<pre>
     do
       local _f_, _s_, _var_ = _explist_
       while true do
         local _var_1_, ..., _var_n_ = _f_(_s_, _var_)
         _var_ = _var_1_
         if _var_ == nil then break end
         _block_
       end
     end
</pre>
<p>

<p>

 Note the following:    
<ul><li><code>_explist_</code> is evaluated only once. Its results are an <i>iterator</i> function, a <i>state</i>, and an initial value for the first <i>iterator variable</i>.  
</li><li><code>_f_</code>, <code>_s_</code>, and <code>_var_</code> are invisible variables. The names are here for explanatory purposes only.  
</li><li>You can use <b>break</b> to exit a <b>for</b> loop.  
</li><li>The loop variables <code>_var_i_</code> are local to the loop; you cannot use their values after the <b>for</b> ends. If you need these values, then assign them to other variables before breaking or exiting the loop.       </li></ul>
</div>



<div id="footer-left">&nbsp;<a href="LuaManual-2-4-4.html">
  Control Structures</a></div>
<div id="footer-right"><a href="LuaManual-2-4-6.html">
  Function Calls as Statements</a>&nbsp;</div>

<div id="last-modified">

</div>

</div>
</body>
</html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>

  Garbage Collection
</title>
<link href="doctorch.css" rel="stylesheet" type="text/css">
</head>

<body class="torchdoc">
<div id="container">

<div id="header">
<h3>
  Garbage Collection</h3>
</div>

<div id="navline">
<a href="index.html">Torch Manual</a>&nbsp; > &nbsp; <a href="LuaManual.html">
Lua 5.1 Reference Manual</a>&nbsp; > &nbsp; <a href="LuaManual-2.html">
  The Language</a>&nbsp; > &nbsp; <b>
  Garbage Collection</b>
</div>

<div id="contents">
<a name="GarbageCollection"></a>

<p>

<p>

<p>

 Lua performs automatic memory management. This means that you have to worry neither about allocating memory for new objects nor about freeing it when the objects are no longer needed. Lua manages memory automatically by running a <i>garbage collector</i> from time to time to collect all <i>dead objects</i> (that is, these objects that are no longer accessible from Lua). All objects in Lua are subject to automatic management: tables, userdata, functions, threads, and strings.   
<p>

 Lua implements an incremental mark-and-sweep collector. It uses two numbers to control its garbage-collection cycles: the <i>garbage-collector pause</i> and the <i>garbage-collector step multiplier</i>.   
<p>

 The garbage-collector pause controls how long the collector waits before starting a new cycle. Larger values make the collector less aggressive. Values smaller than 1 mean the collector will not wait to start a new cycle. A value of 2 means that the collector waits for the total memory in use to double before starting a new cycle.   
<p>

 The step multiplier controls the relative speed of the collector relative to memory allocation. Larger values make the collector more aggressive but also increase the size of each incremental step. Values smaller than 1 make the collector too slow and may result in  the collector never finishing a cycle. The default, 2, means that the collector runs at "twice" the speed of memory allocation.   
<p>

 You can change these numbers by calling <a href="LuaManual-3-7-13.html#luagc"><code>lua_gc</code></a> in C or <a href="LuaManual-5-1-2.html#collectgarbageoptarg"><code>collectgarbage (opt [, arg])</code></a> in Lua. Both get percentage points as arguments (so an argument of 100 means a real value of 1). With these functions you can also control  the collector directly (e.g., stop and restart it).    
</div>

<div id="subsections">
<h3>Subsections</h3>
<ol>
<li><a href="LuaManual-2-10-1.html">
  Garbage-Collection Metamethods</a></li>
<li><a href="LuaManual-2-10-2.html">
  Weak Tables</a></li>
</ol>

</div>

<div id="footer-left">&nbsp;<a href="LuaManual-2-9.html">
  Environments</a></div>
<div id="footer-right"><a href="LuaManual-2-11.html">
  Coroutines</a>&nbsp;</div>

<div id="last-modified">

</div>

</div>
</body>
</html>

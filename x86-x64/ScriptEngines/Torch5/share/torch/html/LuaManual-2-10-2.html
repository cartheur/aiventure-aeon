<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>

  Weak Tables
</title>
<link href="doctorch.css" rel="stylesheet" type="text/css">
</head>

<body class="torchdoc">
<div id="container">

<div id="header">
<h3>
  Weak Tables</h3>
</div>

<div id="navline">
<a href="index.html">Torch Manual</a>&nbsp; > &nbsp; <a href="LuaManual.html">
Lua 5.1 Reference Manual</a>&nbsp; > &nbsp; <a href="LuaManual-2.html">
  The Language</a>&nbsp; > &nbsp; <a href="LuaManual-2-10.html">
  Garbage Collection</a>&nbsp; > &nbsp; <b>
  Weak Tables</b>
</div>

<div id="contents">
<a name="WeakTables"></a>

<p>

<p>

<p>

 A <i>weak table</i> is a table whose elements are <i>weak references</i>. A weak reference is ignored by the garbage collector. In other words, if the only references to an object are weak references, then the garbage collector will collect this object.   
<p>

 A weak table can have weak keys, weak values, or both. A table with weak keys allows the collection of its keys, but prevents the collection of its values. A table with both weak keys and weak values allows the collection of both keys and values. In any case, if either the key or the value is collected, the whole pair is removed from the table. The weakness of a table is controlled by the value of the <code>__mode</code> field of its metatable. If the <code>__mode</code> field is a string containing the character '=k=', the keys in the table are weak. If <code>__mode</code> contains '=v=', the values in the table are weak.   
<p>

 After you use a table as a metatable, you should not change the value of its field <code>__mode</code>. Otherwise, the weak behavior of the tables controlled by this metatable is undefined.        
</div>



<div id="footer-left">&nbsp;<a href="LuaManual-2-10-1.html">
  Garbage-Collection Metamethods</a></div>
<div id="footer-right"><a href=""></a>&nbsp;</div>

<div id="last-modified">

</div>

</div>
</body>
</html>

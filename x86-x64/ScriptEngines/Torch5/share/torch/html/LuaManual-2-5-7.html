<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>

  Table Constructors
</title>
<link href="doctorch.css" rel="stylesheet" type="text/css">
</head>

<body class="torchdoc">
<div id="container">

<div id="header">
<h3>
  Table Constructors</h3>
</div>

<div id="navline">
<a href="index.html">Torch Manual</a>&nbsp; > &nbsp; <a href="LuaManual.html">
Lua 5.1 Reference Manual</a>&nbsp; > &nbsp; <a href="LuaManual-2.html">
  The Language</a>&nbsp; > &nbsp; <a href="LuaManual-2-5.html">
  Expressions</a>&nbsp; > &nbsp; <b>
  Table Constructors</b>
</div>

<div id="contents">
<a name="TableConstructors"></a>

<p>

<p>

<p>

 Table constructors are expressions that create tables. Every time a constructor is evaluated, a new table is created. Constructors can be used to create empty tables, or to create a table and initialize some of its fields. The general syntax for constructors is
<pre>
	tableconstructor ::= `*{*` [fieldlist] `*}*`
	fieldlist ::= field {fieldsep field} [fieldsep]
	field ::= `*[*` exp `*]*` `*=*` exp | Name `*=*` exp | exp
	fieldsep ::= `*,*` | `*;*`
</pre>
<p>

<p>

 Each field of the form <code>[exp1] = exp2</code> adds to the new table an entry with key <code>exp1</code> and value <code>exp2</code>. A field of the form <code>name = exp</code> is equivalent to <code>["name"] = exp</code>. Finally, fields of the form <code>exp</code> are equivalent to <code>[i] = exp</code>, where <code>i</code> are consecutive numerical integers, starting with 1. Fields in the other formats do not affect this counting. For example,
<pre>
     a = { [f(1)] = g; "x", "y"; x = 1, f(x), [30] = 23; 45 }
</pre>
<p>

<p>

 is equivalent to
<pre>
     do
       local t = {}
       t[f(1)] = g
       t[1] = "x"         -- 1st exp
       t[2] = "y"         -- 2nd exp
       t.x = 1            -- t["x"] = 1
       t[3] = f(x)        -- 3rd exp
       t[30] = 23
       t[4] = 45          -- 4th exp
       a = t
     end
</pre>
<p>

<p>

 If the last field in the list has the form <code>exp</code> and the expression is a function call or a vararg expression, then all values returned by this expression enter the list consecutively (see <a href="LuaManual-2-5-8.html#FunctionCalls">Function Calls</a>). To avoid this, enclose the function call (or the vararg expression) in parentheses (see <a href="LuaManual-2-5.html#Expressions">Expressions</a>).   
<p>

 The field list may have an optional trailing separator, as a convenience for machine-generated code.      
</div>



<div id="footer-left">&nbsp;<a href="LuaManual-2-5-6.html">
  Precedence</a></div>
<div id="footer-right"><a href="LuaManual-2-5-8.html">
  Function Calls</a>&nbsp;</div>

<div id="last-modified">

</div>

</div>
</body>
</html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>

 MacOS X
</title>
<link href="doctorch.css" rel="stylesheet" type="text/css">
</head>

<body class="torchdoc">
<div id="container">

<div id="header">
<h3>
 MacOS X</h3>
</div>

<div id="navline">
<a href="index.html">Torch Manual</a>&nbsp; > &nbsp; <a href="Install.html">
Torch Installation Manual</a>&nbsp; > &nbsp; <a href="Install-2.html">
 Installing from sources</a>&nbsp; > &nbsp; <b>
 MacOS X</b>
</div>

<div id="contents">

<p>

<b>A. Requirements</b>
<p>

Torch compilation requires a number of standard packages described below:
<ul><li><b>Mandatory:</b>
<ul><li>A <code>C/C++</code> compiler (<a href="http://gcc.gnu.org">GNU compiler</a> or Intel compiler work fine)
</li><li><a href="http://www.cmake.org"><code>CMake</code></a>
</li></ul></li></ul><p>

<ul><li><b>Recommended:</b>
<ul><li><a href="http://tiswww.case.edu/php/chet/readline/rltop.html">GNU Readline</a>
</li><li><a href="http://subversion.tigris.org">Subversion</a> (svn) to keep up-to-date sources
</li><li><a href="http://trolltech.com/products">QT 4.4</a> or newer development libraries
</li></ul></li></ul><p>

Installation of gcc should be done by installing the
<a href="http://developer.apple.com/tools/xcode">the Apple developer tools</a>. These tools should also
be available on you MacOS X installation DVD.
<p>

CMake can be retrieved from
<a href="http://www.cmake.org/HTML/Download.html">CMake website</a> (you can take
the <b>DMG</b> installer). However, we found it was as simple to use
<a href="http://www.macports.org/">MacPorts</a>, which are necessary anyways for
Subversion and the Readline library. We recommend to avoid
<a href="http://finkproject.org/">Fink</a>, which tends to be always outdated. Assuming
you installed MacPorts, just do:
<pre>
sudo port install readline-5
sudo port install cmake
sudo port install subversion
</pre>
<p>

Note: you need CMake 2.6 or newer to compile Torch, so be sure you have
up-to-date ports beforehand with:
<pre>
sudo port sync
</pre>
<p>

For installing QT 4.4 you can also run
<pre>
sudo port install qt4-mac
</pre>
However, compiling QT 4.4 requires a good amount of time (a bit less than
2h on my Macbook Pro 2.4Ghz). If you cannot wait,
<a href="http://trolltech.com/downloads/opensource/appdev/mac-os-cpp">download</a>
instead the binary <b>DMG</b> file available on <a href="http://trolltech.com">Trolltech website</a>
and install it.
<p>

<b>B. Getting Torch sources</b>
<p>

You can
<a href="https://sourceforge.net/project/showfiles.php?group_id=183526">download</a>
the last tarball sources and unpack it with
<pre>
tar xfvz Torch5-XXX-Source.tar.gz
</pre>
where <code>XXX</code> is the version you downloaded. This will create a directory corresponding
to the name of the archive, that you should rename as <code>torch</code>.
<p>

However, we recommend to use the subversion repository to keep bleeding edge sources.
<pre>
svn checkout https://torch5.svn.sourceforge.net/svnroot/torch5/trunk torch
</pre>
This will create a <code>torch</code> directory. If you prefer another directory name, replace the last <code>torch</code> by
the name you want in the above <code>svn</code> command.
<p>

<b>C. Configuring Torch</b>
<p>

We use <code>CMake</code> for configuring <code>Torch</code>. We <i>highly</i> recommend to create
first a dedicated build directory.  This eases cleaning up built objects,
but also allow you to build Torch with <i>various configurations</i>
(e.g. Release and Debug in two different build directories).
<pre>
cd torch
mkdir build
cd build
cmake ..
</pre>
The <code>..</code> given to <code>cmake</code> indicates the directory where the sources are. We chose here to have a <code>build</code> directory
inside <code>torch</code>, but it could be anywhere else. In that latter case, go instead in your build directory and then do:
<pre>
cmake /path/to/torch/sources
</pre>
<p>

CMake detects external libraries or tools necessary for Torch, and produces
Makefiles such that Torch is then easily compilable on your platform. If
you prefer the GUI version of CMake, you can replace <code>cmake</code> by <code>ccmake</code> in
the above command lines. In particular, it is <i>strongly encouraged</i> to use
<code>ccmake</code> for finer configuration of Torch.
<p>

The most common Torch configuration step you might want to perform is changing the
installation path. By default, Torch will be installed in
<code>/usr/local</code>. You will need super-user rights to perform that. If you are
not root on your computer, you can instead specifying a install directory
to <code>CMake</code> on the above <code>cmake</code> command:
<pre>
cmake .. -DCMAKE_INSTALL_PREFIX=/my/install/path
</pre>
Equivalently you can set the variable <code>CMAKE_INSTALL_PREFIX</code> if you use <code>ccmake</code> GUI.
Please, see <a href="http://www.cmake.org">CMake documentation</a> or <i>at least</i>
<a href="Install-2-5.html#CMakeHints">some of our CMake hints</a> for more details on configuration.
<p>

<b>D. Compiling and installing</b>
<p>

If the configuration was successful, Makefiles should have appeared in your build directory.
Compile Torch with:
<pre>
make
</pre>
and then install it with:
<pre>
make install
</pre>
This last command might possibly be prefixed by <code>sudo</code> if you are
installing Torch in <code>/usr/local</code>.
<p>

<b>E. Running Torch</b>
<p>

Now Torch should be installed in <code>/usr/local</code> or in <code>/my/install/path</code> if
you chose to use the <code>CMAKE_INSTALL_PREFIX</code> when configuring with CMake.
Lua executables (<code>lua</code> and <code>qlua</code>) are found in the <code>bin</code> sub-directory of
these installation directories.
<pre>
/usr/local/bin/lua
Lua 5.1.3  Copyright (C) 1994-2008 Lua.org, PUC-Rio
> require 'torch'
> = torch.Tensor(5):zero()

0
0
0
0
0
[torch.Tensor of dimension 5]

> 
</pre>
For convenience, you might want to add to your <code>PATH</code> the path to lua
binaries. The executable <code>lua</code> is a simple Lua interpreter (as provided on
<a href="http://www.lua.org">Lua website</a>), while <code>qlua</code> has enhanced
interactivity (like completion) and is able to handle graphics and QT
widgets.
<p>

</div>



<div id="footer-left">&nbsp;<a href="Install-2-1.html">
 Linux</a></div>
<div id="footer-right"><a href="Install-2-3.html">
 Cygwin</a>&nbsp;</div>

<div id="last-modified">

</div>

</div>
</body>
</html>
